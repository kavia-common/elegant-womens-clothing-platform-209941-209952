{"is_source_file": true, "format": "JavaScript", "description": "This file contains service functions for managing orders in an e-commerce backend. It includes creating orders with transactional stock updates, retrieving orders by user, listing all orders for admin purposes, and updating order statuses.", "external_files": ["../db", "../db.query"], "external_methods": ["withTransaction", "query"], "published": ["createOrder", "getOrderByIdForUser", "listAllOrders", "updateOrderStatus"], "classes": [], "methods": [{"name": "createOrder(userId, { items, shippingAddress, notes })", "description": "Creates a new order for a user, validating stock levels, inserting order and order items, updating stock within a transaction, and returning the created order details.", "scope": "", "scopeKind": ""}, {"name": "getOrderByIdForUser(userId, orderId)", "description": "Retrieves a specific order for a user, including its items, ensuring ownership.", "scope": "", "scopeKind": ""}, {"name": "listAllOrders()", "description": "Lists all orders with user information, intended for admin use.", "scope": "", "scopeKind": ""}, {"name": "updateOrderStatus(orderId, status)", "description": "Updates the status of an existing order, returning the updated order.", "scope": "", "scopeKind": ""}], "calls": ["client.query", "query"], "search-terms": ["createOrder", "getOrderByIdForUser", "listAllOrders", "updateOrderStatus", "transaction", "order items", "stock validation"], "state": 2, "file_id": 19, "knowledge_revision": 49, "git_revision": "", "ctags": [{"_type": "tag", "name": "createOrder", "path": "/home/kavia/workspace/code-generation/elegant-womens-clothing-platform-209941-209952/backend_express_js/src/services/order.js", "pattern": "/^  createOrder,$/", "language": "JavaScript", "kind": "field", "scope": "module.exports", "scopeKind": "class"}, {"_type": "tag", "name": "createOrder", "path": "/home/kavia/workspace/code-generation/elegant-womens-clothing-platform-209941-209952/backend_express_js/src/services/order.js", "pattern": "/^async function createOrder(userId, { items, shippingAddress, notes }) {$/", "language": "JavaScript", "kind": "function", "signature": "(userId, { items, shippingAddress, notes })"}, {"_type": "tag", "name": "getOrderByIdForUser", "path": "/home/kavia/workspace/code-generation/elegant-womens-clothing-platform-209941-209952/backend_express_js/src/services/order.js", "pattern": "/^async function getOrderByIdForUser(userId, orderId) {$/", "language": "JavaScript", "kind": "function", "signature": "(userId, orderId)"}, {"_type": "tag", "name": "listAllOrders", "path": "/home/kavia/workspace/code-generation/elegant-womens-clothing-platform-209941-209952/backend_express_js/src/services/order.js", "pattern": "/^async function listAllOrders() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "updateOrderStatus", "path": "/home/kavia/workspace/code-generation/elegant-womens-clothing-platform-209941-209952/backend_express_js/src/services/order.js", "pattern": "/^async function updateOrderStatus(orderId, status) {$/", "language": "JavaScript", "kind": "function", "signature": "(orderId, status)"}], "hash": "c35765f78d59458ef3a83bae0324c1d5", "format-version": 4, "code-base-name": "backend_express_js", "filename": "backend_express_js/src/services/order.js", "fields": [{"name": "createOrder,", "scope": "module.exports", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"49": ""}]}