{"is_source_file": true, "format": "JavaScript", "description": "This file defines the OrderController class, which handles HTTP requests related to order operations such as creation, retrieval, listing, and status updates. It relies on schemas for validation and an order service for business logic.", "external_files": ["../validation/schemas", "../services/order"], "external_methods": ["require('../validation/schemas')", "orderService.createOrder", "orderService.getOrderByIdForUser", "orderService.listAllOrders", "orderService.updateOrderStatus"], "published": ["new OrderController()"], "classes": [{"name": "OrderController", "description": "Controller class for managing order-related HTTP endpoints, including create, get, list, and update status operations."}], "methods": [{"name": "create(req, res, next)", "description": "Creates an order for the authenticated user after validating request body.", "scope": "OrderController", "scopeKind": "class"}, {"name": "get", "description": "Retrieves a specific order for the authenticated user, validating order ID from request parameters."}, {"name": "adminList", "description": "Allows an admin to list all orders."}, {"name": "adminUpdateStatus", "description": "Updates the status of an order specified by ID, with validation."}], "calls": ["orderCreateSchema.validate", "orderService.createOrder", "Number(req.params.id)", "orderService.getOrderByIdForUser", "orderService.listAllOrders", "orderService.updateOrderStatus"], "search-terms": ["OrderController", "orderService", "orderCreateSchema", "orderStatusSchema", "createOrder", "getOrderByIdForUser", "listAllOrders", "updateOrderStatus"], "state": 2, "file_id": 22, "knowledge_revision": 52, "git_revision": "2b17782ab032d87943dce21b0f3c9ef27da91461", "ctags": [{"_type": "tag", "name": "Number", "path": "/home/kavia/workspace/code-generation/elegant-womens-clothing-platform-209941-209952/backend_express_js/src/controllers/orders.js", "pattern": "/^      if (Number.isNaN(orderId)) return res.status(400).json({ status: 'error', message: 'Invali/", "language": "JavaScript", "kind": "field", "scope": "OrderController", "scopeKind": "class"}, {"_type": "tag", "name": "OrderController", "path": "/home/kavia/workspace/code-generation/elegant-womens-clothing-platform-209941-209952/backend_express_js/src/controllers/orders.js", "pattern": "/^class OrderController {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "create", "path": "/home/kavia/workspace/code-generation/elegant-womens-clothing-platform-209941-209952/backend_express_js/src/controllers/orders.js", "pattern": "/^  async create(req, res, next) {$/", "language": "JavaScript", "kind": "method", "signature": "(req, res, next)", "scope": "OrderController", "scopeKind": "class"}, {"_type": "tag", "name": "exports", "path": "/home/kavia/workspace/code-generation/elegant-womens-clothing-platform-209941-209952/backend_express_js/src/controllers/orders.js", "pattern": "/^module.exports = new OrderController();$/", "language": "JavaScript", "kind": "variable", "scope": "module", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/elegant-womens-clothing-platform-209941-209952/backend_express_js/src/controllers/orders.js", "pattern": "/^      const id = Number(req.params.id);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "next", "path": "/home/kavia/workspace/code-generation/elegant-womens-clothing-platform-209941-209952/backend_express_js/src/controllers/orders.js", "pattern": "/^  async get(req, res, next) {$/", "language": "JavaScript", "kind": "field", "scope": "OrderController", "scopeKind": "class"}, {"_type": "tag", "name": "order", "path": "/home/kavia/workspace/code-generation/elegant-womens-clothing-platform-209941-209952/backend_express_js/src/controllers/orders.js", "pattern": "/^      const order = await orderService.getOrderByIdForUser(req.user.id, orderId);$/", "language": "JavaScript", "kind": "field", "scope": "OrderController", "scopeKind": "class"}, {"_type": "tag", "name": "order", "path": "/home/kavia/workspace/code-generation/elegant-womens-clothing-platform-209941-209952/backend_express_js/src/controllers/orders.js", "pattern": "/^      if (!order) return res.status(404).json({ status: 'error', message: 'Order not found' });$/", "language": "JavaScript", "kind": "field", "scope": "OrderController", "scopeKind": "class"}, {"_type": "tag", "name": "orderId", "path": "/home/kavia/workspace/code-generation/elegant-womens-clothing-platform-209941-209952/backend_express_js/src/controllers/orders.js", "pattern": "/^      const orderId = Number(req.params.id);$/", "language": "JavaScript", "kind": "field", "scope": "OrderController", "scopeKind": "class"}, {"_type": "tag", "name": "orderService", "path": "/home/kavia/workspace/code-generation/elegant-womens-clothing-platform-209941-209952/backend_express_js/src/controllers/orders.js", "pattern": "/^const orderService = require('..\\/services\\/order');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "orders", "path": "/home/kavia/workspace/code-generation/elegant-womens-clothing-platform-209941-209952/backend_express_js/src/controllers/orders.js", "pattern": "/^      const orders = await orderService.listAllOrders();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "req", "path": "/home/kavia/workspace/code-generation/elegant-womens-clothing-platform-209941-209952/backend_express_js/src/controllers/orders.js", "pattern": "/^  async get(req, res, next) {$/", "language": "JavaScript", "kind": "field", "scope": "OrderController", "scopeKind": "class"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/elegant-womens-clothing-platform-209941-209952/backend_express_js/src/controllers/orders.js", "pattern": "/^      if (!order) return res.status(404).json({ status: 'error', message: 'Order not found' });$/", "language": "JavaScript", "kind": "field", "scope": "OrderController", "scopeKind": "class"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/elegant-womens-clothing-platform-209941-209952/backend_express_js/src/controllers/orders.js", "pattern": "/^      if (Number.isNaN(orderId)) return res.status(400).json({ status: 'error', message: 'Invali/", "language": "JavaScript", "kind": "field", "scope": "OrderController", "scopeKind": "class"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/elegant-womens-clothing-platform-209941-209952/backend_express_js/src/controllers/orders.js", "pattern": "/^      res.json(order);$/", "language": "JavaScript", "kind": "field", "scope": "OrderController", "scopeKind": "class"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/elegant-womens-clothing-platform-209941-209952/backend_express_js/src/controllers/orders.js", "pattern": "/^  async get(req, res, next) {$/", "language": "JavaScript", "kind": "field", "scope": "OrderController", "scopeKind": "class"}, {"_type": "tag", "name": "updated", "path": "/home/kavia/workspace/code-generation/elegant-womens-clothing-platform-209941-209952/backend_express_js/src/controllers/orders.js", "pattern": "/^      const updated = await orderService.updateOrderStatus(id, value.status);$/", "language": "JavaScript", "kind": "constant"}], "hash": "479291c52c61bf3dbe1aa5f9d26c459b", "format-version": 4, "code-base-name": "backend_express_js", "filename": "backend_express_js/src/controllers/orders.js", "fields": [{"name": "if (Number.isNaN(orderId)) return res.status(400).json({ status: 'error', message: 'Invali/", "scope": "OrderController", "scopeKind": "class", "description": "unavailable"}, {"name": "module.exports = new OrderController();", "scope": "module", "scopeKind": "class", "description": "unavailable"}, {"name": "async get(req, res, next) {", "scope": "OrderController", "scopeKind": "class", "description": "unavailable"}, {"name": "const order = await orderService.getOrderByIdForUser(req.user.id, orderId);", "scope": "OrderController", "scopeKind": "class", "description": "unavailable"}, {"name": "if (!order) return res.status(404).json({ status: 'error', message: 'Order not found' });", "scope": "OrderController", "scopeKind": "class", "description": "unavailable"}, {"name": "const orderId = Number(req.params.id);", "scope": "OrderController", "scopeKind": "class", "description": "unavailable"}, {"name": "res.json(order);", "scope": "OrderController", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"52": "2b17782ab032d87943dce21b0f3c9ef27da91461"}]}